 <!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="a utility to flatten source files using a REST api">
 <meta name="keywords" content="compose,flatten,javascript,python">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css" />

<style>
	.markdown-body {
		box-sizing: border-box;
		min-width: 200px;
		max-width: 980px;
		margin: 0 auto;
		padding: 45px;
	}

	@media (max-width: 767px) {
		.markdown-body {
			padding: 15px;
		}
	}
    .highlight{
        box-shadow: 0 0 10px rgba(57, 255, 20, 1);
    }
</style>


<script type="text/javascript">
    window.examplezip = "data:application/zip;base64,UEsDBBQAAAAAAI1igU8AAAAAAAAAAAAAAAAHAAAAc2ltcGxlL1BLAwQKAAAAAACNYoFPxwkia0cAAABHAAAAEAAAAHNpbXBsZS9hZGRvbmUuanN2YXIgcnVuID0gZnVuY3Rpb24odmFsdWUpew0KICAgIHZhbHVlWzBdICs9IDE7DQp9DQoNCmV4cG9ydHMucnVuID0gcnVuO1BLAwQUAAAACACNYoFPlgI2QJoAAABvAQAADwAAAHNpbXBsZS9pbmRleC5qc62PMQ7CMAxF90i5Q5SFRJUCO+IUjFWH0IQqqIrBdmBA3J1UURcYweP7T7b/3aPyIUCO6qAw3krCaDZu29jG7qVYFCqnL6Uxd6HVqiGVmavV7wYppBghE8zRzTBVeC555ATZBM/ePqVQda4IYyRyxAEKuwcmjkb3ulskx3BkTHkyttODtlK8PtaadrIm7WGHJa/sV7H2+7MoxRtQSwMECgAAAAAAjWKBT/dDYOJHAAAARwAAABAAAABzaW1wbGUvc3Vib25lLmpzdmFyIHJ1biA9IGZ1bmN0aW9uKHZhbHVlKXsNCiAgICB2YWx1ZVswXSAtPSAxOw0KfQ0KDQpleHBvcnRzLnJ1biA9IHJ1bjtQSwECPwAUAAAAAACNYoFPAAAAAAAAAAAAAAAABwAkAAAAAAAAABAAAAAAAAAAc2ltcGxlLwoAIAAAAAAAAQAYANBN72F8qNUB0E3vYXyo1QHl/+5hfKjVAVBLAQI/AAoAAAAAAI1igU/HCSJrRwAAAEcAAAAQACQAAAAAAAAAIAAAACUAAABzaW1wbGUvYWRkb25lLmpzCgAgAAAAAAABABgA5f/uYXyo1QHl/+5hfKjVAeX/7mF8qNUBUEsBAj8AFAAAAAgAjWKBT5YCNkCaAAAAbwEAAA8AJAAAAAAAAAAgAAAAmgAAAHNpbXBsZS9pbmRleC5qcwoAIAAAAAAAAQAYANom72F8qNUB2ibvYXyo1QHaJu9hfKjVAVBLAQI/AAoAAAAAAI1igU/3Q2DiRwAAAEcAAAAQACQAAAAAAAAAIAAAAGEBAABzaW1wbGUvc3Vib25lLmpzCgAgAAAAAAABABgA0E3vYXyo1QHQTe9hfKjVAdBN72F8qNUBUEsFBgAAAAAEAAQAfgEAANYBAAAAAA=="
    window.output = "data:text/plain;base64,KGZ1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGVzKSB7CiAgICB2YXIgbW9kdWxlX2NhY2hlID0ge307CiAgICBjb25zdCBidWlsdGluX3JlcXVpcmUgPSByZXF1aXJlOwogICAgY29uc3QgZmluZF9tb2R1bGUgPSBmdW5jdGlvbihwYXRoKSB7CiAgICAgICAgaWYgKC8uanMkLy50ZXN0KHBhdGgpKQogICAgICAgICAgICBleHRzID0gWycnXQogICAgICAgIGVsc2UKICAgICAgICAgICAgZXh0cyA9IFsnJywgJy5qcycsICcvaW5kZXguanMnXQogICAgICAgIGZvcihsZXQgbW9kdWxlX25hbWUgb2YgT2JqZWN0LmtleXMobW9kdWxlcykpCiAgICAgICAgewogICAgICAgICAgICBmb3IobGV0IGV4dCBvZiBleHRzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlX25hbWUgPT09IHBhdGgrZXh0KSByZXR1cm4gbW9kdWxlX25hbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgZ2V0QWJzb2x1dGVQYXRoID0gZnVuY3Rpb24gKGJhc2UsIHJlbGF0aXZlKSB7CiAgICAgICAgdmFyIGJhc2UgPSBiYXNlLnNwbGl0KCIvIikKICAgICAgICBiYXNlLnBvcCgpCiAgICAgICAgdmFyIGJhc2VMZW5ndGggPSBiYXNlLmxlbmd0aDsKICAgICAgICB2YXIgcmVsYXRpdmUgPSByZWxhdGl2ZS5zcGxpdCgiLyIpCiAgICAgICAgdmFyIHJlc3VsdCA9IFtdCiAgICAgICAgCiAgICAgICAgd2hpbGUocmVsYXRpdmUubGVuZ3RoICE9IDApewogICAgICAgICAgICB2YXIgc3ViID0gcmVsYXRpdmUucG9wKCkKICAgICAgICAgICAgaWYoc3ViID09ICIuIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmKHN1YiA9PSAiLi4iKXsKICAgICAgICAgICAgICAgIGJhc2UucG9wKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goc3ViKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKHJlc3VsdFswXS5zbGljZSgtMykgPT09ICIuanMiKXsKICAgICAgICAgIHJlc3VsdFswXSA9IHJlc3VsdFswXS5zbGljZSgwLC0zKQogICAgICAgIH0KICAgICAgICBpZihyZXN1bHRbcmVzdWx0Lmxlbmd0aC0xXSAhPT0gYmFzZVswXSl7CiAgICAgICAgICAgIHdoaWxlKGJhc2UubGVuZ3RoICE9IDApCiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChiYXNlLnBvcCgpKQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0LnJldmVyc2UoKS5qb2luKCIvIikKICAgIH0KICAgIHJlcXVpcmUgPSBmdW5jdGlvbihwYXJlbnRQYXRoKXsgcmV0dXJuIGZ1bmN0aW9uKHBhdGgpIHsKICAgICAgICAKICAgICAgICBpZiAobW9kdWxlX2NhY2hlW3BhdGhdKSB7CiAgICAgICAgICAgIHJldHVybiBtb2R1bGVfY2FjaGVbcGF0aF0uZXhwb3J0czsKICAgICAgICB9CiAgICAgICAgcGF0aCA9IGdldEFic29sdXRlUGF0aChwYXJlbnRQYXRoLHBhdGgpCiAgICAgICAgbW9kdWxlX3BhdGggPSBmaW5kX21vZHVsZShwYXRoKQogICAgICAgIGlmIChtb2R1bGVfcGF0aCkKICAgICAgICB7CiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVfY2FjaGVbbW9kdWxlX3BhdGhdID0ge2V4cG9ydHM6IHt9fTsKICAgICAgICAgICAgbW9kdWxlc1ttb2R1bGVfcGF0aF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgcmVxdWlyZShtb2R1bGVfcGF0aCkpOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gYnVpbHRpbl9yZXF1aXJlKHBhdGgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7CiAgICB9CiAgfQogICAgbWFpbiA9IHJlcXVpcmUoJ3NpbXBsZS9pbmRleC5qcycpKCdzaW1wbGUvaW5kZXgnKTsKICAgIHJlcXVpcmUgPSBidWlsdGluX3JlcXVpcmU7CiAgICByZXR1cm4gbWFpbjsKfSkocmVxdWlyZSwgewogICAgJ3NpbXBsZS9zdWJvbmUuanMnOiAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlKSB7Ci8vPj4+QkVHSU48PDwgc2ltcGxlL3N1Ym9uZS5qcwp2YXIgcnVuID0gZnVuY3Rpb24odmFsdWUpewogICAgdmFsdWVbMF0gLT0gMTsKfQoKZXhwb3J0cy5ydW4gPSBydW47Ci8vPj4+RU5EPDw8IHNpbXBsZS9zdWJvbmUuanMKfSksCiAgICAnc2ltcGxlL2FkZG9uZS5qcyc6IChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIHJlcXVpcmUpIHsKLy8+Pj5CRUdJTjw8PCBzaW1wbGUvYWRkb25lLmpzCnZhciBydW4gPSBmdW5jdGlvbih2YWx1ZSl7CiAgICB2YWx1ZVswXSArPSAxOwp9CgpleHBvcnRzLnJ1biA9IHJ1bjsKLy8+Pj5FTkQ8PDwgc2ltcGxlL2FkZG9uZS5qcwp9KSwKICAgICdzaW1wbGUvaW5kZXguanMnOiAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlKSB7Ci8vPj4+QkVHSU48PDwgc2ltcGxlL2luZGV4LmpzCnZhciBhZGRvbmUgPSByZXF1aXJlKCcuL2FkZG9uZScpOwp2YXIgc3Vib25lID0gcmVxdWlyZSgnLi9zdWJvbmUuanMnKTsKdmFyIHJlc3VsdCA9IFswXQoKY29uc29sZS5sb2cgPSBmdW5jdGlvbihkYXRhKXsKICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKCJbIitkYXRhLnRvU3RyaW5nKCkrIl0iKQp9Cgpjb25zb2xlLmxvZyhyZXN1bHQpCmFkZG9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCmFkZG9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCnN1Ym9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCnN1Ym9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCgoKLy8+Pj5FTkQ8PDwgc2ltcGxlL2luZGV4LmpzCn0pLAp9KQ=="
    window.step = 0
    window.compose_html = `<nav>
                                    <div class="nav-wrapper teal lighten-2">
                                    <a href="#!" class="brand-logo center">To One</a>
                                    <ul class="left">
                                        <li id="compose_0" note="How to use the compose UI..." class="active"><a target="_blank" onclick="runUI('compose')">Compose</a></li>
                                        <li id="revert_0"><a target="_blank" onclick="runUI('revert')">Revert</a></li>
                                    </ul>
                                    </div>
                                </nav>
                                <form action="" method="" enctype="multipart/form-data">
                                    <div class="row">
                                    </div>
                                    <div class="row">
                                        <div class="col m2" style="text-align:right;margin-left:17.5%;">
                                            <label style="line-height:36px;">Select Language</label>
                                        </div>
                                        <div class="col m5">
                                            <select id="compose_1" note="Use the drop down menu to select the language of the files in the zip archive, in the example file the language is javascript." class="browser-default" name="languageSelect">
                                                <option value="" disabled selected>No langauge selected</option>
                                                
                                                    <option>javascript</option>
                                                
                                                    <option>python</option>
                                                
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                            <div class= "col m2" style="text-align:right;margin-left:17.5%;">
                                                <label style="line-height:64px;">Zip file</label>
                                            </div>
                                            <div class="col m5">
                                                <div class="file-field input-field">
                                                        <div id="compose_2" note="Hit browse button, a file open dialogue window will open to select a zip file. This tutorial uses example.zip with a simple layout. The UI loads the directory tree for the zip file." class="btn m2" style="float:right">
                                                                <span>Browse</span>
                                                                <!--<input type="file" name="zip"/>-->
                                                            </div>
                                                    <div class="file-path-wrapper m10">
                                                        <input class="file-path validate" type="text" id="filename">
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                    <div id="directoryContainer">
                                    <div class="row center-align" style="display:none;">
                                        <div id="compose_3" note="Now select the entry file, this is the file containing the main function or entry point." class="col m2" style="text-align:right;margin-left:17.5%;">
                                            <label>Select Entry File</label>
                                        </div>
                                    </div>
                                    <div class="row" style="display:none;">
                                        <div id="directoryTree" class="col m5 card-panel teal lighten-2" style="margin-left:35%;margin-top:-4%;display:none;">
                                            <ul>
                                            </ul>
                                        </div>
                                    </div></div>
                                    <div class="row outform" style="display:none;">
                                        <div class="col m2" style="text-align:right;margin-left:17.5%;">
                                            <label id="compose_4" note="Optionally add a filename here, without the extension. This tutorial uses 'optional'"  style="line-height:36px;">Output filename</label>
                                        </div>
                                        <div class="col m5">
                                            <input  type="text" name="outfile" value="">
                                        </div>
                                    </div>
                                    <div id="submit" class="row" style="text-align:center">
                                        <a href="data:text/plain;base64,KGZ1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGVzKSB7CiAgICB2YXIgbW9kdWxlX2NhY2hlID0ge307CiAgICBjb25zdCBidWlsdGluX3JlcXVpcmUgPSByZXF1aXJlOwogICAgY29uc3QgZmluZF9tb2R1bGUgPSBmdW5jdGlvbihwYXRoKSB7CiAgICAgICAgaWYgKC8uanMkLy50ZXN0KHBhdGgpKQogICAgICAgICAgICBleHRzID0gWycnXQogICAgICAgIGVsc2UKICAgICAgICAgICAgZXh0cyA9IFsnJywgJy5qcycsICcvaW5kZXguanMnXQogICAgICAgIGZvcihsZXQgbW9kdWxlX25hbWUgb2YgT2JqZWN0LmtleXMobW9kdWxlcykpCiAgICAgICAgewogICAgICAgICAgICBmb3IobGV0IGV4dCBvZiBleHRzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlX25hbWUgPT09IHBhdGgrZXh0KSByZXR1cm4gbW9kdWxlX25hbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgZ2V0QWJzb2x1dGVQYXRoID0gZnVuY3Rpb24gKGJhc2UsIHJlbGF0aXZlKSB7CiAgICAgICAgdmFyIGJhc2UgPSBiYXNlLnNwbGl0KCIvIikKICAgICAgICBiYXNlLnBvcCgpCiAgICAgICAgdmFyIGJhc2VMZW5ndGggPSBiYXNlLmxlbmd0aDsKICAgICAgICB2YXIgcmVsYXRpdmUgPSByZWxhdGl2ZS5zcGxpdCgiLyIpCiAgICAgICAgdmFyIHJlc3VsdCA9IFtdCiAgICAgICAgCiAgICAgICAgd2hpbGUocmVsYXRpdmUubGVuZ3RoICE9IDApewogICAgICAgICAgICB2YXIgc3ViID0gcmVsYXRpdmUucG9wKCkKICAgICAgICAgICAgaWYoc3ViID09ICIuIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmKHN1YiA9PSAiLi4iKXsKICAgICAgICAgICAgICAgIGJhc2UucG9wKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goc3ViKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKHJlc3VsdFswXS5zbGljZSgtMykgPT09ICIuanMiKXsKICAgICAgICAgIHJlc3VsdFswXSA9IHJlc3VsdFswXS5zbGljZSgwLC0zKQogICAgICAgIH0KICAgICAgICBpZihyZXN1bHRbcmVzdWx0Lmxlbmd0aC0xXSAhPT0gYmFzZVswXSl7CiAgICAgICAgICAgIHdoaWxlKGJhc2UubGVuZ3RoICE9IDApCiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChiYXNlLnBvcCgpKQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0LnJldmVyc2UoKS5qb2luKCIvIikKICAgIH0KICAgIHJlcXVpcmUgPSBmdW5jdGlvbihwYXJlbnRQYXRoKXsgcmV0dXJuIGZ1bmN0aW9uKHBhdGgpIHsKICAgICAgICAKICAgICAgICBpZiAobW9kdWxlX2NhY2hlW3BhdGhdKSB7CiAgICAgICAgICAgIHJldHVybiBtb2R1bGVfY2FjaGVbcGF0aF0uZXhwb3J0czsKICAgICAgICB9CiAgICAgICAgcGF0aCA9IGdldEFic29sdXRlUGF0aChwYXJlbnRQYXRoLHBhdGgpCiAgICAgICAgbW9kdWxlX3BhdGggPSBmaW5kX21vZHVsZShwYXRoKQogICAgICAgIGlmIChtb2R1bGVfcGF0aCkKICAgICAgICB7CiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVfY2FjaGVbbW9kdWxlX3BhdGhdID0ge2V4cG9ydHM6IHt9fTsKICAgICAgICAgICAgbW9kdWxlc1ttb2R1bGVfcGF0aF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgcmVxdWlyZShtb2R1bGVfcGF0aCkpOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gYnVpbHRpbl9yZXF1aXJlKHBhdGgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7CiAgICB9CiAgfQogICAgbWFpbiA9IHJlcXVpcmUoJ3NpbXBsZS9pbmRleC5qcycpKCdzaW1wbGUvaW5kZXgnKTsKICAgIHJlcXVpcmUgPSBidWlsdGluX3JlcXVpcmU7CiAgICByZXR1cm4gbWFpbjsKfSkocmVxdWlyZSwgewogICAgJ3NpbXBsZS9zdWJvbmUuanMnOiAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlKSB7Ci8vPj4+QkVHSU48PDwgc2ltcGxlL3N1Ym9uZS5qcwp2YXIgcnVuID0gZnVuY3Rpb24odmFsdWUpewogICAgdmFsdWVbMF0gLT0gMTsKfQoKZXhwb3J0cy5ydW4gPSBydW47Ci8vPj4+RU5EPDw8IHNpbXBsZS9zdWJvbmUuanMKfSksCiAgICAnc2ltcGxlL2FkZG9uZS5qcyc6IChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIHJlcXVpcmUpIHsKLy8+Pj5CRUdJTjw8PCBzaW1wbGUvYWRkb25lLmpzCnZhciBydW4gPSBmdW5jdGlvbih2YWx1ZSl7CiAgICB2YWx1ZVswXSArPSAxOwp9CgpleHBvcnRzLnJ1biA9IHJ1bjsKLy8+Pj5FTkQ8PDwgc2ltcGxlL2FkZG9uZS5qcwp9KSwKICAgICdzaW1wbGUvaW5kZXguanMnOiAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCByZXF1aXJlKSB7Ci8vPj4+QkVHSU48PDwgc2ltcGxlL2luZGV4LmpzCnZhciBhZGRvbmUgPSByZXF1aXJlKCcuL2FkZG9uZScpOwp2YXIgc3Vib25lID0gcmVxdWlyZSgnLi9zdWJvbmUuanMnKTsKdmFyIHJlc3VsdCA9IFswXQoKY29uc29sZS5sb2cgPSBmdW5jdGlvbihkYXRhKXsKICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKCJbIitkYXRhLnRvU3RyaW5nKCkrIl0iKQp9Cgpjb25zb2xlLmxvZyhyZXN1bHQpCmFkZG9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCmFkZG9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCnN1Ym9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCnN1Ym9uZS5ydW4ocmVzdWx0KQpjb25zb2xlLmxvZyhyZXN1bHQpCgoKLy8+Pj5FTkQ8PDwgc2ltcGxlL2luZGV4LmpzCn0pLAp9KQ==" download="optional.js"><button class="btn waves-effect waves-light" id="compose_5" note="Click download. A download of a single text file containing the composed source will begin. If an error occured the user will see JSON error message and a suggestion to address the error." type="button" name="action">Submit
                                            <i class="material-icons right"></i>
                                        </button></a>
                                    </div>
                                    <div class="progress" style="display:none">
                                        <div class="indeterminate"></div>
                                    </div>
                                </form>`
    window.revert_html = `
    <nav>
                    <div class="nav-wrapper teal lighten-2">
                      <a href="#!" class="brand-logo center">To Many</a>
                      <ul class="left hide-on-med-and-down">
                        <li id="compose_0" ><a target="_blank" onclick="runUI('compose')">Compose</a></li>
                        <li id="revert_0" note="How to use the revert UI..." class="active"><a target="_blank" onclick="runUI('revert')">Revert</a></li>
                      </ul>
                    </div>
                  </nav>
        <form action="" method="post" enctype="multipart/form-data">
            <div class="row">
            </div>
            <div class="row">
                <div class="col m2" style="text-align:right;margin-left:17.5%;">
                    <label style="line-height:36px;">Select Language</label>
                </div>
                <div class="col m5">
                    <select id="revert_1" note="Use the drop down menu to select the language of the composed file, for this example javascript was used." class="browser-default" name="languageSelect">
                        <option value="" disabled selected>No langauge selected</option>
                        
                            <option>javascript</option>
                        
                            <option>python</option>
                        
                    </select>
                </div>
            </div>
            <div class="row">
                    <div class= "col m2" style="text-align:right;margin-left:17.5%;">
                        <label style="line-height:64px;">Composed file</label>
                    </div>
                    <div class="col m5">
                        <div class="file-field input-field">
                                <div id="revert_2" note="Hit browse button, a file open dialogue window will open to select the composed file. This tutorial uses optional.js used in the compose tutorial." class="btn m2" style="float:right">
                                        <span>Browse</span>
                                        <!--<input type="file" name="source"/>-->
                                    </div>
                            <div class="file-path-wrapper m10">
                                <input class="file-path validate" type="text" id="filename">
                            </div>
                        </div>
                    </div>
            </div>

            <div class="row outform">
                <div class="col m2" style="text-align:right;margin-left:17.5%;">
                    <label id="revert_3" note="Optionally add a filename here, without the extension. This tutorial uses 'example' to reproduce the zip file used in the compose tutorial." style="line-height:36px;">Output filename</label>
                </div>
                <div class="col m5">
                    <input type="text" name="outfile">
                </div>
            </div>
            <div id="submit" class="row" style="text-align:center">
                <a href="data:application/zip;base64,UEsDBBQAAAAAAI1igU8AAAAAAAAAAAAAAAAHAAAAc2ltcGxlL1BLAwQKAAAAAACNYoFPxwkia0cAAABHAAAAEAAAAHNpbXBsZS9hZGRvbmUuanN2YXIgcnVuID0gZnVuY3Rpb24odmFsdWUpew0KICAgIHZhbHVlWzBdICs9IDE7DQp9DQoNCmV4cG9ydHMucnVuID0gcnVuO1BLAwQUAAAACACNYoFPlgI2QJoAAABvAQAADwAAAHNpbXBsZS9pbmRleC5qc62PMQ7CMAxF90i5Q5SFRJUCO+IUjFWH0IQqqIrBdmBA3J1UURcYweP7T7b/3aPyIUCO6qAw3krCaDZu29jG7qVYFCqnL6Uxd6HVqiGVmavV7wYppBghE8zRzTBVeC555ATZBM/ePqVQda4IYyRyxAEKuwcmjkb3ulskx3BkTHkyttODtlK8PtaadrIm7WGHJa/sV7H2+7MoxRtQSwMECgAAAAAAjWKBT/dDYOJHAAAARwAAABAAAABzaW1wbGUvc3Vib25lLmpzdmFyIHJ1biA9IGZ1bmN0aW9uKHZhbHVlKXsNCiAgICB2YWx1ZVswXSAtPSAxOw0KfQ0KDQpleHBvcnRzLnJ1biA9IHJ1bjtQSwECPwAUAAAAAACNYoFPAAAAAAAAAAAAAAAABwAkAAAAAAAAABAAAAAAAAAAc2ltcGxlLwoAIAAAAAAAAQAYANBN72F8qNUB0E3vYXyo1QHl/+5hfKjVAVBLAQI/AAoAAAAAAI1igU/HCSJrRwAAAEcAAAAQACQAAAAAAAAAIAAAACUAAABzaW1wbGUvYWRkb25lLmpzCgAgAAAAAAABABgA5f/uYXyo1QHl/+5hfKjVAeX/7mF8qNUBUEsBAj8AFAAAAAgAjWKBT5YCNkCaAAAAbwEAAA8AJAAAAAAAAAAgAAAAmgAAAHNpbXBsZS9pbmRleC5qcwoAIAAAAAAAAQAYANom72F8qNUB2ibvYXyo1QHaJu9hfKjVAVBLAQI/AAoAAAAAAI1igU/3Q2DiRwAAAEcAAAAQACQAAAAAAAAAIAAAAGEBAABzaW1wbGUvc3Vib25lLmpzCgAgAAAAAAABABgA0E3vYXyo1QHQTe9hfKjVAdBN72F8qNUBUEsFBgAAAAAEAAQAfgEAANYBAAAAAA==" download="example.zip"><button class="btn waves-effect waves-light" id="revert_4" note="Click download. A download of a zip file containing the directory structure and files of the composed source. If an error occured the user will see JSON error message and a suggestion to address the error." type="button" name="action">Submit
                    <i class="material-icons right"></i>
                </button></a>
            </div>

            <div class="progress" style="display:none">
                <div class="indeterminate"></div>
            </div>
        </form>

    `
    
    //window.blob = window.atob(window.examplezip)
    function init(){
        M.AutoInit();
        $(".nav-wrapper").addClass("highlight")
    }
    function runUI(appFunc){
        $(".nav-wrapper").removeClass("highlight")
        window.step = 0;
        var max = {
            compose:6,
            revert:5
        }
        if(appFunc == "compose"){
            //replace innerHTML
            $(".col.s7").html(window.compose_html)
        }
        else{
            //replace innerHTML
            $(".col.s7").html(window.revert_html)
        }

        var functions = {
            compose:[
                function(){},
                function(){
                    //set language
                    $("select option").each(function(){
                        if ($(this).text() == "javascript")
                            $(this).attr("selected","selected");
                    });
                },
                function(){
                    $("#filename").val("example.zip")
                    processZipFile(window.examplezip)
                },
                function(){
                    $("#index\\.js_anchor").addClass("jstree-clicked")
                },
                function(){
                    $("input[name='outfile']").prop("value", "optional")
                },
                function(){
                    window.setTimeout(function(){$('#compose_5').trigger('click')}, 1000);
                }
            ],
            revert:[
                function(){},
                function(){
                     //set language
                    $("select option").each(function(){
                        if ($(this).text() == "javascript")
                            $(this).attr("selected","selected");
                    });
                },
                function(){
                    $("#filename").val("optional.js")
                },
                function(){
                    $("input[name='outfile']").prop("value", "example")
                },
                function(){
                    window.setTimeout(function(){$('#revert_4').trigger('click')}, 1000);
                },
                function(){}
            ]
        }

        $(`#${appFunc}_0`).addClass("highlight");
        window.next = function(){
            if(window.step + 1 <= max[appFunc]){
                $(`#${appFunc}_${window.step}`).removeClass("highlight");
                window.step++;
                $(`#${appFunc}_${window.step}`).addClass("highlight");
                functions[appFunc][window.step]()
                $("#notes").text($(`#${appFunc}_${window.step}`).attr("note"))
            }    
        }
    }
</script>

<script type="text/javascript" src="js/WebContent/zip.js"></script>
<script type="text/javascript" src="js/main.js"></script>

<title>Compose - Flattening source files</title>
</head>

<body onload="init()">
    <div class="container">
        <!-- Page Content goes here -->
        <div class="row">
            <br>
            <div class="col s12"><img width="100%" src="imgs/banner_plain.jpg" /></div>
        </div>
            <div class="row">
                <ul class="collapsible">
                    <li class="active">
                    <div class="collapsible-header"><i class="material-icons">info</i>Getting Started</div>
                    <div class="collapsible-body">

                        <!-- files/getting_started.md, using httpie, cmd.exe -> http -o getting_started.html POST https://api.github.com/markdown text=@getting_started.md mode=gfm -->
                        
                        <div class="markdown-body">
                        <h3>Compose processes a zip archive of source files into a single file, and a revert process for a composed file back to a zip archive</h3>
                        <h4>Requirements</h4>
                        <ul>
                        <li>Nodejs 8+</li>
                        </ul>
                        <h4>Run</h4>
                        <ol>
                        <li>Download or clone the repository</li>
                        <li>Using command line</li>
                        <li>change directory to the unzipped or cloned folder</li>
                        <li>Run <code>npm install</code></li>
                        <li>Copy <code>.env.sample</code> and rename the copy to <code>.env</code></li>
                        </ol>
                        <ul>
                        <li>Note: <code>PORT</code> defaults to <code>8080</code></li>
                        </ul>
                        <ol start="4">
                        <li>Run <code>npm run start</code></li>
                        <li>Navigate to <strong>localhost:</strong><code>PORT</code> using a browser or call the REST API with httpie or similar program.</li>
                        </ol>
                        <ul>
                        <li>See user documentation below for further details</li>
                        </ul>
                        <h4>Want to add a language or new feature?</h4>
                        <p><em>see developer documentation</em></p>
                        </div>

                    </div>
                    </li>
                    <li>
                    <div class="collapsible-header"><i class="material-icons">person</i>User Documentation</div>
                    <div class="collapsible-body">
                        <div class="row">
                            <h5>Using the UI</h5>
                            <!--==============START UI===================-->
                            <div class="col s7">
                                <nav>
                                    <div class="nav-wrapper teal lighten-2">
                                    <a href="#!" class="brand-logo center">To One</a>
                                    <ul class="left">
                                        <li id="compose_0" note="How to use the compose UI..."><a target="_blank" onclick="runUI('compose')">Compose</a></li>
                                        <li id="revert_0"><a target="_blank" onclick="runUI('revert')">Revert</a></li>
                                    </ul>
                                    </div>
                                </nav>
                            </div>
                            <div class="col s5">
                                <i onclick="next()" class="material-icons" style="cursor:pointer;">keyboard_arrow_right</i>
                                <!-- BEGIN description section -->
                                <span id="notes" class="flow-text">Click on "Compose" or "Revert" buttons on the left user interface and use the arrow to navigate using the web UI</span>
                            </div>
                        </div>
                        <br>
                        <hr>
                        <br>
                        <div class="row">
                            <h5>Using the REST API</h5>

                            <h6>View the api docs: <a href="files/api.html">API v1</a><h6>

                            <h6>Making API calls using Httpie</h6>
                            <div class="card">
                                <div class="card-content">
                                <span class="card-title">Composing a zip archive</span>
                                <p>Example file: simple.zip<br>use <code>cd</code> to change to the directory with the source file<br>command: <code>http --form POST localhost:8080/api/v1/compose language="javascript" entry="simple/index.js" out="simple.js" file@simple.zip</code></p>
                                </div>
                                <div class="card-action">
                                <a class="tooltipped teal-text text-lighten-2 pulse" data-position="bottom" data-tooltip="Success - returns a plain text single source file">Response: 200</a>
                                <a class="tooltipped teal-text text-lighten-2 pulse" data-position="bottom" data-tooltip="Error - usually a unset required parameter">400</a>
                                <a class="tooltipped teal-text text-lighten-2 pulse" data-position="bottom" data-tooltip="Error - file not found in the zip archive">404</a>
                                <a class="tooltipped teal-text text-lighten-2 pulse" data-position="bottom" data-tooltip="Error - language provided is not implemented">501</a>
                                </div>
                            </div>
                            <br><br>
                            <div class="card">
                                <div class="card-content">
                                <span class="card-title">Reverting a file</span>
                                <p>Example file: simple.zip<br>use <code>cd</code> to change to the directory with the source file<br>command: <code>http --form POST localhost:8080/api/v1/revert language="javascript" file@simple.js</code></p>
                                </div>
                                <div class="card-action">
                                <a class="tooltipped teal-text text-lighten-2 pulse" data-position="bottom" data-tooltip="Success - returns a zip file using application/zip mime type">Response: 200</a>
                                <a class="tooltipped teal-text text-lighten-2 pulse" data-position="bottom" data-tooltip="Error - usually a unset required parameter">400</a>
                                </div>
                            </div>
                            <br><br>
                            <a href="imgs/examples.png">Examples</a>
                            
                        </div>
                    </div>
                    </li>
                    <li>
                    <div class="collapsible-header"><i class="material-icons">computer</i>Developer Documentation</div>
                    <div class="collapsible-body">
                        <div class="markdown-body">
                            <h2>Development Roadmap</h2>
                            <ol>
                            <li>Languages supported currently</li>
                            </ol>
                            <ul>
                            <li>Javascript</li>
                            <li>Python</li>
                            </ul>
                            <ol start="2">
                            <li>Languages in development</li>
                            </ol>
                            <ul>
                            <li>C++</li>
                            </ul>
                            <h2>Notes for developers/maintainers</h2>
                            <p>This project runs off a general web MVC architecture implemented by Node Express.</p>
                            <p><a href="src/api/"><code>/src/api/</code></a> contains the model logic including the language specific logic</p>
                            <p><a href="src/controllers/"><code>/src/controllers</code></a> and <a href="src/views/"><code>/src/views/</code></a> contain the logic for controllers and views respectively.</p>
                            <p><a href="src/routes/"><code>/src/routes/</code></a> contains HTTP routing instructions for Node Express.</p>
                            <p><a href="tests/api"><code>tests/api/</code></a> Contains the tests. New tests can be added, using the JEST framework. The test suite can be run with the node command <code>npm run test</code></p>
                            <h3>To Add A New Language</h3>
                            <p>New languages can be easily added and registered to the program. First make a new class that extends the abstract class <a href="src/api/language.ts"><code>/src/api/language.ts</code></a>. At a minimum, the class variables name, exts, and comment are likely to need to be defined for the new language. However, the most important function is the compose function.</p>
                            <p>The compose function takes two parameters. The first is a dictionary of the user uploaded zip file. The dictionary's values are the files converted to string arrays (line by line, preserving whitespacing). The keys are the full filepaths of each file including the name of the zip as the top level directory. For example, foo/__init__.py is zipped into a folder named mydir, that file's key would be my_dir/foo/__init__.py. The other parameter is the user defined entry or main filename in the same format. The function needs to return the single, combined, file as a string.</p>
                            <p><a href="src/api/languages.ts"><code>src/api/languages.ts</code></a> is where the program keeps track of included languages. Simply add new languages to the dictionary and the front end will automatically incorporate it, and the backend will know how to call it. The  is how the app will recognize the language in HTTP requests and is how it will display on the view, so make sure it's recognizable.</p>
                            <h3>Testing A New Language</h3>
                            <h4>Unit testing</h4>
                            <ul>
                            <li>Compose uses Jest as the testing framework</li>
                            <li>Add unit tests in the <a href="test/api/"><code>test/api/</code></a> directory in a file named <code>&lt;common language name&gt;.test.ts</code></li>
                            </ul>
                            <h4>Integration testing</h4>
                            <ul>
                            <li>Once your language is implemented create test directories and source files
                            <ol>
                            <li>go to <a href="test/files/"><code>test/files/</code></a> and create a directory with the name the same as the common language name</li>
                            <li>In that directory create a config.json which has the following structure</li>
                            </ol>
                            </li>
                            </ul>
                            <pre><code>    {
                                "command": {"win32": string, "else": string} | string, //the command format string with a single %s
                                "entry": string, //full path from root of zip archive to the main file
                                &lt;name of test sub directories :string&gt;: string, // the expected result from running the command
                                }
                            </code></pre>
                            <ul>
                            <li>
                            <ol start="3">
                            <li>Now create the sub directories with test source files, run them, copy the outputs to the corresponding JSON property in the config.json</li>
                            </ol>
                            </li>
                            </ul>
                            <h2>PRESUMPTIONS/PRECONDITIONS/ASSUMPTIONS</h2>
                            <h4>Revert</h4>
                            <ol>
                            <li>The Language methods are implemented and the comment guard wrapping source files is of the form of a single line comment followed by the begin guard or end guard.</li>
                            <li>The begin and end guard must be distinct and not a substring of one another.</li>
                            <li>Any edits to the source between guards must be done in a way that it can be undone by a per-line map function. The <a href="src/api/language.ts">Language</a> class has a protected member function, processLine, that can be overwritten by language imeplementations to facilitate this, an example can be found in python class.</li>
                            </ol>
                            <h2></h2>
                            <h3>TRAVIS CI Setup</h3>
                            <ol>
                            <li>Sign into travis-ci.com using your GitHub account.</li>
                            <li>Activate your repository through Travis CI.</li>
                            <li>Builds can either be triggered manually or will automatically build during the next update to the repository.</li>
                            </ol>
                            <h2>Issues</h2>
                            <ul>
                            <li>The revert function when using linux has a root directory named "undefined" but otherwise reproduces the source zip file. The issue was narrowed to the mock file system called in the revert function.</li>
                            </ul>
                        </div>
                    </div>
                    </li>
                </ul>
        </div>
    </div>
</body>
</html> 